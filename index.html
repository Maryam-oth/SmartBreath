<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SmartBreath - AI Respiratory Diagnosis</title>

  <!-- Font Awesome -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #1a6c5c, #1f8bb2, #2dd4fd);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .container {
      width: 100%;
      max-width: 1000px;
      display: flex;
      flex-direction: column;
      gap: 30px;
    }

    header {
      text-align: center;
      color: white;
      margin-bottom: 20px;
    }

    h1 {
      font-size: 2.8rem;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    .subtitle {
      font-size: 1.2rem;
      opacity: 0.9;
    }

    .main-content {
      display: flex;
      gap: 30px;
      flex-wrap: wrap;
    }

    /* Panels */
    .upload-section,
    .results-section {
      flex: 1;
      min-width: 300px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    .results-section {
      display: flex;
      flex-direction: column;
    }

    .section-title {
      font-size: 1.5rem;
      margin-bottom: 20px;
      color: #1a6c5c;
      border-bottom: 2px solid #2dd4fd;
      padding-bottom: 10px;
    }

    /* Upload Area */
    .upload-area {
      border: 2px dashed #1a6c5c;
      border-radius: 10px;
      padding: 40px 20px;
      text-align: center;
      margin-bottom: 20px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .upload-area:hover {
      background-color: #f0f9ff;
    }

    .upload-icon {
      font-size: 48px;
      color: #1a6c5c;
      margin-bottom: 15px;
    }

    .upload-text {
      color: #1a6c5c;
      font-weight: 600;
    }

    .file-info {
      margin-top: 15px;
      font-size: 0.9rem;
      color: #666;
    }

    .file-name {
      text-align: center;
      margin-bottom: 15px;
      font-weight: 600;
      color: #1a6c5c;
    }

    /* Buttons */
    .btn {
      background: linear-gradient(to right, #1a6c5c, #1f8bb2);
      color: white;
      border: none;
      padding: 14px 20px;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      width: 100%;
      margin-top: 10px;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .btn:disabled {
      background: #cccccc;
      cursor: not-allowed;
    }

    .btn-secondary {
      background: linear-gradient(to right, #6c757d, #495057);
    }

    /* Results */
    .diagnosis-result {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 20px;
    }

    .result-icon { 
      font-size: 64px; 
      margin-bottom: 20px; 
    }
    .healthy { color: #4CAF50; }
    .copd { color: #FF9800; }
    .pneumonia { color: #F44336; }

    .result-text {
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 10px;
    }

    /* Status Bar */
    .status-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-top: 1px solid #eee;
      margin-top: auto;
    }

    .status {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .status-indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #4CAF50;
    }

    .processing .status-indicator {
      background: #FF9800;
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.5; }
      100% { opacity: 1; }
    }

    .progress-bar {
      flex: 1;
      height: 8px;
      background: #eee;
      border-radius: 4px;
      margin: 0 15px;
      overflow: hidden;
    }

    .progress {
      height: 100%;
      background: linear-gradient(to right, #1a6c5c, #2dd4fd);
      width: 0%;
      transition: width 0.3s;
    }

    /* Instructions */
    .instructions {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    .instructions h3 {
      color: #1a6c5c;
      margin-bottom: 15px;
    }

    .instructions ol { padding-left: 20px; }
    .instructions li {
      margin-bottom: 10px;
      line-height: 1.5;
    }

    @media (max-width: 768px) {
      .main-content { flex-direction: column; }
      h1 { font-size: 2.2rem; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>SmartBreath</h1>
      <p class="subtitle">AI-Powered Respiratory Disease Diagnosis</p>
    </header>

    <div class="main-content">
      <!-- Upload Section -->
      <div class="upload-section">
        <h2 class="section-title">Upload Stethoscope Audio</h2>

        <div class="upload-area" id="uploadArea">
          <div class="upload-icon"><i class="fas fa-file-audio"></i></div>
          <div class="upload-text">Click to upload or drag your audio file here</div>
          <div class="file-info">Supported formats: WAV, MP3, FLAC (max 10MB)</div>
        </div>

        <div id="fileName" class="file-name"></div>

        <button class="btn" id="analyzeBtn" disabled>Analyze Audio</button>
        <button class="btn btn-secondary" id="resetBtn">Reset</button>
      </div>

      <!-- Results Section -->
      <div class="results-section">
        <h2 class="section-title">Diagnosis Result</h2>

        <div class="diagnosis-result" id="diagnosisResult">
          <div class="result-icon"><i class="fas fa-lungs"></i></div>
          <div class="result-text">Upload audio to begin analysis</div>
        </div>

        <div class="status-bar">
          <div class="status" id="status">
            <div class="status-indicator"></div>
            <span>Ready for upload</span>
          </div>
          <div class="progress-bar">
            <div class="progress" id="progress"></div>
          </div>
          <div id="progressText">0%</div>
        </div>
      </div>
    </div>

    <div class="instructions">
      <h3>How to Use SmartBreath</h3>
      <ol>
        <li>Record respiratory sounds using a digital stethoscope or smartphone</li>
        <li>Upload the audio file (WAV, MP3, or FLAC format)</li>
        <li>Click "Analyze Audio" to get a simulated AI diagnosis</li>
        <li>View your diagnosis result instantly</li>
        <li>For best results, ensure clear audio with minimal background noise</li>
      </ol>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const uploadArea = document.getElementById('uploadArea');
      const fileName = document.getElementById('fileName');
      const analyzeBtn = document.getElementById('analyzeBtn');
      const resetBtn = document.getElementById('resetBtn');
      const diagnosisResult = document.getElementById('diagnosisResult');
      const status = document.getElementById('status');
      const progress = document.getElementById('progress');
      const progressText = document.getElementById('progressText');

      let uploadedFile = null;

      // Upload area functionality
      uploadArea.addEventListener('click', function() {
        document.getElementById('fileInput').click();
      });

      uploadArea.addEventListener('dragover', function(e) {
        e.preventDefault();
        uploadArea.style.backgroundColor = '#f0f9ff';
        uploadArea.style.borderColor = '#2dd4fd';
      });

      uploadArea.addEventListener('dragleave', function() {
        uploadArea.style.backgroundColor = '';
        uploadArea.style.borderColor = '#1a6c5c';
      });

      uploadArea.addEventListener('drop', function(e) {
        e.preventDefault();
        uploadArea.style.backgroundColor = '';
        uploadArea.style.borderColor = '#1a6c5c';

        if (e.dataTransfer.files.length) {
          handleFile(e.dataTransfer.files[0]);
        }
      });

      // Hidden file input
      const fileInput = document.createElement('input');
      fileInput.type = 'file';
      fileInput.id = 'fileInput';
      fileInput.accept = 'audio/*';
      fileInput.style.display = 'none';
      document.body.appendChild(fileInput);

      fileInput.addEventListener('change', function() {
        if (fileInput.files.length) {
          handleFile(fileInput.files[0]);
        }
      });

      function handleFile(file) {
        if (!file.type.startsWith('audio/')) {
          alert('Please upload an audio file (WAV, MP3, or FLAC)');
          return;
        }

        if (file.size > 10 * 1024 * 1024) {
          alert('File size must be less than 10MB');
          return;
        }

        uploadedFile = file;
        fileName.textContent = file.name;
        analyzeBtn.disabled = false;
        status.querySelector('span').textContent = 'File ready for analysis';
      }

      // Analyze button
      analyzeBtn.addEventListener('click', async function() {
        if (!uploadedFile) return;

        analyzeBtn.disabled = true;
        status.classList.add('processing');
        status.querySelector('.status-indicator').style.background = '#FF9800';
        status.querySelector('span').textContent = 'Analyzing audio...';

        let progressValue = 0;
        const progressInterval = setInterval(() => {
          if (progressValue < 90) {
            progressValue += 1;
            progress.style.width = progressValue + '%';
            progressText.textContent = progressValue + '%';
          }
        }, 100);

        try {
          // Simulate delay & random result
          await new Promise(r => setTimeout(r, 3000));

          clearInterval(progressInterval);
          progress.style.width = '100%';
          progressText.textContent = '100%';

          const possibleResults = ['Healthy', 'COPD', 'Pneumonia'];
          const prediction = possibleResults[Math.floor(Math.random() * possibleResults.length)];

          const resultIcon = diagnosisResult.querySelector('.result-icon');
          const resultText = diagnosisResult.querySelector('.result-text');

          let iconClass = '';
          if (prediction === 'Healthy') {
            iconClass = 'healthy';
            resultIcon.innerHTML = '<i class="fas fa-heartbeat"></i>';
          } else if (prediction === 'COPD') {
            iconClass = 'copd';
            resultIcon.innerHTML = '<i class="fas fa-lungs-virus"></i>';
          } else {
            iconClass = 'pneumonia';
            resultIcon.innerHTML = '<i class="fas fa-virus"></i>';
          }

          resultIcon.className = 'result-icon ' + iconClass;
          resultText.textContent = `Diagnosis: ${prediction}`;
          resultText.className = 'result-text ' + iconClass;

          status.classList.remove('processing');
          status.querySelector('.status-indicator').style.background = '#4CAF50';
          status.querySelector('span').textContent = 'Analysis complete';

        } catch (error) {
          clearInterval(progressInterval);
          alert('Error: ' + error.message);
          analyzeBtn.disabled = false;
          status.classList.remove('processing');
          status.querySelector('.status-indicator').style.background = '#F44336';
          status.querySelector('span').textContent = 'Error during analysis';
        }
      });

      // Reset button
      resetBtn.addEventListener('click', function() {
        uploadedFile = null;
        fileName.textContent = '';
        analyzeBtn.disabled = true;

        const resultIcon = diagnosisResult.querySelector('.result-icon');
        const resultText = diagnosisResult.querySelector('.result-text');

        resultIcon.innerHTML = '<i class="fas fa-lungs"></i>';
        resultIcon.className = 'result-icon';
        resultText.textContent = 'Upload audio to begin analysis';
        resultText.className = 'result-text';

        progress.style.width = '0%';
        progressText.textContent = '0%';

        status.classList.remove('processing');
        status.querySelector('.status-indicator').style.background = '#4CAF50';
        status.querySelector('span').textContent = 'Ready for upload';
      });
    });
  </script>
</body>
</html>

